{"version":3,"sources":["screens/Integration/Integration.jsx","components/Lead.jsx","components/NoResults.jsx","components/SearchInput.jsx","hooks/useDebouce.jsx","screens/MainBoard.jsx","App.js","index.js","screens/Integration/integration.module.css"],"names":["Integration","useState","error","setError","navigate","useNavigate","handleSubmit","e","a","preventDefault","domain","target","value","clientId","clientSecret","clientCode","redirectUri","fetch","method","headers","body","JSON","stringify","response","ok","json","message","console","log","className","styles","formContainer","wrapper","errorDiv","onSubmit","formDiv","htmlFor","type","name","id","required","Lead","lead","isVisible","setisVisible","valueCollapser","setValueCollapser","onClick","style","backgroundColor","status","color","src","alt","responsible_user","created_time","price","colSpan","contacts","map","contact","custom_fields_values","values","thing","parseInt","href","enum_id","field_id","NoResults","SearchInput","setData","setIsLoading","searchValue","setSearchValue","searchDebounce","callback","delay","timer","useRef","debouncedCallback","useCallback","args","current","clearTimeout","setTimeout","useDebounce","handleChangeSearchValue","length","url","data","onChange","placeholder","visibility","MainBoard","server_URL","isLoading","useEffect","getServerData","to","height","width","minWidth","_embedded","leads","App","path","element","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.ee138141.chunk.js","sourcesContent":["import React, { useState } from 'react'\r\nimport styles from './integration.module.css'\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport const Integration = () => {\r\n\r\n  const [error, setError] = useState('')\r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = async (e) => {\r\n    setError('')\r\n    const URL_integration = '/integration'\r\n    e.preventDefault()\r\n    const domain = e.target[0].value;\r\n    const clientId = e.target[1].value;\r\n    const clientSecret = e.target[2].value;\r\n    const clientCode = e.target[3].value;\r\n    const redirectUri = e.target[4].value;\r\n    const response = await fetch(URL_integration, {\r\n      method: 'POST',\r\n      headers: {'Content-Type': 'application/json'},\r\n      body: JSON.stringify({\r\n        domain,\r\n        clientId,\r\n        clientSecret,\r\n        clientCode,\r\n        redirectUri,\r\n      })\r\n    })\r\n    if(response.ok) {\r\n      return navigate(\"/\");\r\n    }\r\n    const json = await response.json()\r\n    setError(json.message)\r\n    console.log(json);\r\n  }\r\n\r\n  return (\r\n    <main className={styles.formContainer}>\r\n      <div className={styles.wrapper}>\r\n        <h1 className='h1'>Integration</h1>\r\n        {error ?\r\n        <div className={styles.errorDiv}>\r\n          {error}\r\n        </div>\r\n        :\r\n        ''\r\n        }\r\n        <form onSubmit={handleSubmit} className='form'>\r\n          <div className={styles.formDiv}>\r\n            <label htmlFor=\"domain\">Ваш домен: https://<b>your_domain</b>.amocrm.ru</label>\r\n            <input type=\"text\" name=\"domain\" id=\"domain\" required/>\r\n            <label htmlFor=\"clientId\">ID интеграции:</label>\r\n            <input type=\"text\" name=\"clientId\" id=\"clientId\" required/>\r\n            <label htmlFor=\"clientSecret\">Секретный ключ:</label>\r\n            <input type=\"text\" name=\"clientSecret\" id=\"clientSecret\" required/>\r\n            <label htmlFor=\"clientCode\">Код авторизации:</label>\r\n            <input type=\"text\" name=\"clientCode\" id=\"clientCode\" required/>\r\n            <label htmlFor=\"redirectUri\">Ссылка перенаправления: </label>\r\n            <input type=\"text\" name=\"redirectUri\" id=\"redirectUri\" required/>\r\n            <button type=\"submit\">Отправить</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </main>\r\n  )\r\n}\r\n","import React, { useState } from 'react'\r\n\r\nexport const Lead = ({lead}) => {\r\n\r\n  const [isVisible, setisVisible] = useState(false)\r\n  const [valueCollapser, setValueCollapser] = useState('+')\r\n\r\n  const contactsHandler = (e) => {\r\n    if(!isVisible) {\r\n      setValueCollapser('-')\r\n      setisVisible(true)\r\n    } else {\r\n      setValueCollapser('+')\r\n      setisVisible(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <tr>\r\n        <td className=\"tbl-cell\" >\r\n          <span className=\"plus-container\" onClick={contactsHandler}>{valueCollapser}</span>\r\n        </td>\r\n        <td className=\"tbl-cell text-left\">{lead.name}</td>\r\n        <td className=\"tbl-cell\">\r\n          <div className='status' style={{backgroundColor: lead.status.color }}>\r\n          {lead.status.name}\r\n          </div>\r\n          </td>\r\n        <td className=\"tbl-cell\">\r\n          <div className='responsible-person-container'>\r\n            <img src=\"/noava.jpg\" alt=\"avatar\" className='avatar' />\r\n            <span className='responsible-name'>{lead.responsible_user.name}</span>\r\n          </div>\r\n        </td>\r\n        <td className=\"tbl-cell\">{lead.created_time}</td>\r\n        <td className=\"tbl-cell\">{lead.price} ₽</td>\r\n      </tr>\r\n      <tr className={isVisible ? \"contacts\" : \"contacts hidden\" } >\r\n        <td></td>\r\n        <td colSpan='5'>\r\n        {lead.contacts.map(contact => {\r\n          return (\r\n            <div className='contact-container' key={contact.id} >\r\n              <img src=\"/noava.jpg\" alt=\"avatar\" className='avatar' />\r\n              <span className='contact-name'>{contact.name} </span>\r\n              <span>{contact.custom_fields_values.map(value => {\r\n                return (\r\n                  <span key={value.field_id}>\r\n                    {value.values.map(thing => {\r\n                    const number = parseInt(thing.value)\r\n                    if(number) {\r\n                      return (\r\n                          <a href={'tel:+' + thing.value} key={thing.enum_id} className='tel-email'>📞</a>\r\n                      )\r\n                    }\r\n                    else {\r\n                      return (\r\n                        <a href={'mailto:' + thing.value} key={thing.enum_id} className='tel-email'>✉</a>\r\n                      )\r\n                    }\r\n                    })}\r\n                  </span>\r\n                )\r\n              })}</span>\r\n            </div>\r\n          )\r\n        })}\r\n        </td>\r\n      </tr>\r\n    </>\r\n  )\r\n}\r\n","import React from 'react'\r\n\r\nexport const NoResults = () => {\r\n  return (\r\n    <div className='nores-block'>\r\n      <div className='nores-container'>\r\n        <img src=\"/noresults.jpg\" alt=\"noresults\" />\r\n        <p>Ничего не найдено</p>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState } from 'react'\r\nimport { FaSearch } from 'react-icons/fa'\r\nimport { GrClose } from 'react-icons/gr'\r\nimport useDebounce from '../hooks/useDebouce'\r\n\r\nexport default function SearchInput({setData, setIsLoading}) {\r\n\r\n  const [searchValue, setSearchValue] = useState('')\r\n  const searchDebounce = useDebounce(getSearchData, 500)\r\n\r\n  const handleChangeSearchValue = (e) => {\r\n    setSearchValue(e.target.value)\r\n    if(e.target.value.length > 2 ) {\r\n      searchDebounce(e.target.value)\r\n    }\r\n    if(!e.target.value) {\r\n      searchDebounce()\r\n    }\r\n  }\r\n\r\n  async function getSearchData(searchValue = '') {\r\n    setIsLoading(true)\r\n    const url = `/api/?search=${searchValue}`\r\n    const response = await fetch(url)\r\n    let data = ''\r\n    if(response.ok) {\r\n      data = await response.json()\r\n    }\r\n    setData(data)\r\n    setIsLoading(false)\r\n  }\r\n\r\n  const cleanSearchValue = () => {\r\n    let e = {target: {value : ''}}\r\n    handleChangeSearchValue(e)\r\n  }\r\n\r\n  return (\r\n    <div className=\"search\">\r\n      <input type=\"text\" name=\"search\" id=\"search\" value={searchValue} onChange={handleChangeSearchValue} placeholder=\"Поиск\" />\r\n      <GrClose onClick={cleanSearchValue} className='search-cross' visibility={!searchValue && 'hidden'}/>\r\n      <FaSearch className='search-icon'/>\r\n    </div>\r\n  )\r\n}\r\n","import { useCallback, useRef } from \"react\";\r\n\r\nexport default function useDebounce(callback, delay) {\r\n  const timer = useRef()\r\n\r\n  const debouncedCallback = useCallback((...args) => {\r\n    console.log(args);\r\n    if(timer.current) {\r\n      clearTimeout(timer.current)\r\n    }\r\n    timer.current = setTimeout(() => {\r\n      callback(...args)\r\n    }, delay)\r\n  },[callback, delay])\r\n\r\n  return debouncedCallback\r\n}","import { useEffect, useState } from 'react';\r\nimport ReactLoading from 'react-loading';\r\nimport { Link } from 'react-router-dom';\r\nimport { Lead } from '../components/Lead';\r\nimport { NoResults } from '../components/NoResults';\r\nimport SearchInput from '../components/SearchInput';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction MainBoard() {\r\n\r\n  const server_URL = '/api'\r\n  const [data, setData] = useState('')\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  const navigate = useNavigate()\r\n\r\n  async function getServerData() {\r\n    const response = await fetch(server_URL)\r\n    const json = await response.json()\r\n    if (response.status === 500) {\r\n      return navigate('/integration')\r\n    }\r\n    setData(json)\r\n    setIsLoading(false)\r\n    console.log(json);\r\n  }\r\n\r\n  useEffect(() => {\r\n    getServerData()\r\n  }, [])\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <div className=\"wrapper-search\">\r\n        <h3><Link to=\"/integration\">CRM Integration</Link></h3>\r\n        <SearchInput setData={setData} setIsLoading={setIsLoading}/>\r\n      </div>\r\n      <div>\r\n        {isLoading && <div className=\"loader-container\"><ReactLoading className='loader' type={'bubbles'} color={'#019ce4'} height={'100px'} width={'100px'} /></div>}\r\n        {data\r\n        ?\r\n        <table className='table'>\r\n          <colgroup>\r\n            <col style={{width: '50px'}}/>\r\n            <col style={{width: '400px'}} />\r\n            <col style={{width: '150px', minWidth: '150px'}}/>\r\n            <col style={{ minWidth: '150px'}}/>\r\n            <col style={{ minWidth: '150px'}}/>\r\n            <col style={{ minWidth: '100px'}}/>\r\n          </colgroup>\r\n          <thead>\r\n            <tr>\r\n              <th></th>\r\n              <th>Название</th>\r\n              <th>Статус</th>\r\n              <th>Ответственный</th>\r\n              <th>Дата создания</th>\r\n              <th>Бюджет</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n          {data?._embedded?.leads.map(lead => {\r\n            return (\r\n            <Lead lead={lead} key={lead.id} />\r\n              )\r\n          })}\r\n          </tbody>\r\n        </table>\r\n        :\r\n        <NoResults />\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MainBoard;\r\n","import { Routes, Route } from 'react-router-dom'\nimport { Integration } from './screens/Integration/Integration';\nimport MainBoard from './screens/MainBoard';\nimport './App.css';\n\nexport default function App() {\n  return (\n    <Routes >\n      <Route path=\"/\" element={<MainBoard />} />\n      <Route path=\"/integration\" element={<Integration />} />\n    </Routes>\n  )\n}\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formContainer\":\"integration_formContainer__1TV90\",\"wrapper\":\"integration_wrapper__32yF1\",\"formDiv\":\"integration_formDiv__2Nd1W\",\"errorDiv\":\"integration_errorDiv__3gTOO\",\"blink\":\"integration_blink__3pg28\"};"],"sourceRoot":""}